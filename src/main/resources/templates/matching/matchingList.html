<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ì„¸ì´í”„ë¼ì´ë“œ: ì•ˆì „í•œ ë¼ì´ë”©ì˜ ì‹œì‘</title>
  <th:block th:replace="~{common/header :: headerFragment}"></th:block>

  <!--ğŸ‘‡ì—¬ê¸°ì— header script ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘‡-->
  <style>
      table {
          border-collapse: collapse;
          width: 100%; /* í…Œì´ë¸”ì„ ë¶€ëª¨ ìš”ì†Œì— ë§ì¶° ì „ì²´ ë„ˆë¹„ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
          margin: 0rem auto;
          box-shadow: 4px 4px 10px 0 rgba(0, 0, 0, 0.1);
          background-color: white;
      }

      /* í…Œì´ë¸” í–‰ */
      th, td {
          padding: 8px;
          text-align: left;
          border-bottom: 1px solid #ddd;
          text-align: center;
      }

      th {
          background-color: #1b1b1b;
          color: #ddd;
      }

      /* í…Œì´ë¸” ì˜¬ë ¸ì„ ë•Œ */
      tbody tr:hover {
          background-color: #d3d3d3;
          opacity: 0.9;
          cursor: pointer;
      }

      /* ì œëª© ì…€ ë„ˆë¹„ ëŠ˜ë¦¬ê¸° */
      th:first-child {
          width: 40%; /* ì œëª© ì…€ì˜ ë„ˆë¹„ë¥¼ 40%ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      }

      /* ì˜ˆìƒ ê±°ë¦¬ ë° ìƒíƒœ ì…€ ë„ˆë¹„ ì¤„ì´ê¸° */
      td:nth-child(2),
      td:nth-child(4) {
          width: 20%; /* ì˜ˆìƒ ê±°ë¦¬ ë° ìƒíƒœ ì…€ì˜ ë„ˆë¹„ë¥¼ 20%ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      }

      .create-button {
          display: inline-block;
          padding: 8px 16px;
          background-color: #007bff;
          color: #fff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          text-decoration: none;
      }

      .create-button:hover {
          background-color: #0056b3;
      }

  </style>

  <!--ğŸ‘†ì—¬ê¸°ì— header script ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘†-->
</head>

<body>
<div class="wrapper">
  <th:block th:replace="~{common/sidebar :: sidebarFragment}"></th:block>
  <div class="main">
    <th:block th:replace="~{common/navbar :: navbarFragment}"></th:block>

    <main class="content">
      <!--ğŸ‘‡ì—¬ê¸°ì— ë‚´ìš© ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘‡-->
      <div class="container mt-4">
        <h2 style="color: #007bff; font-size: 28px; font-weight: bold; margin-bottom: 20px;">ë§¤ì¹­ ì»¤ë®¤ë‹ˆí‹°</h2>
        <h5>ì§€ì—­ë³„ë¡œ ê²€ìƒ‰</h5>
        <form action="#" th:action="@{/matching/list}" method="get">
          <select name="metropolitanCity" id="metropolitanCity" onchange="this.form.submit()">
            <option value="">ì „ì²´</option>
            <option th:each="city : ${metropolitanCities}"
                    th:value="${city}"
                    th:text="${city}"
                    th:selected="${city == selectedMetropolitanCity}"></option>
          </select>
          <!-- ì„ íƒí•œ ê´‘ì—­ìì¹˜êµ¬ì— ë”°ë¼ í•´ë‹¹ ë„ì‹œ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
          <select name="city" id="city">
            <option value="">ì „ì²´</option>
            <option th:each="city : ${cities}"
                    th:value="${city}"
                    th:text="${city}"
                    th:selected="${city == selectedCity}"></option>
          </select>
          <button type="submit">ê²€ìƒ‰</button>
        </form>
        <br>

        <div id="articleContainer" class="post-box">
          <table class="table">
            <thead>
            <tr>
              <th>ì œëª©</th>
              <th>ì˜ˆìƒ ê±°ë¦¬</th>
              <th>ë¼ì´ë”© ì‹œì‘ ì‹œê°„</th>
              <th>ìƒíƒœ</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="matching : ${page.content}">
              <td>
                <a th:href="@{/matching/{id}(id=${matching.id})}">
                  <span th:text="${matching.title}"></span>
                </a>
              </td>
              <td>
                <span th:text="${matching.kilometer}"></span>
              </td>
              <td>
                <span th:text="${#temporals.format(matching.ridingTime, 'MMì›” ddì¼ EEEE HH:mm')}"></span>
              </td>
              <td>
                <span th:text="${matching.status?.status != null ? matching.status.status : 'ëŒ€ê¸°ì¤‘(ìˆ˜ì •)'}"></span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <br>
        <button class="create-button" onclick="location.href='/matching/create'">ë§¤ì¹­ê¸€ ì‘ì„±</button>
      </div>
      <div class="footer">
        <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë§í¬ ì¶”ê°€ -->
        <div th:if="${page.totalPages > 1}" class="pagination">
          <div>
            <a th:each="i : ${#numbers.sequence(0, page.totalPages-1)}"
               th:href="@{'/matching/list?page=' + ${i} + '&metropolitanCity=' + ${selectedMetropolitanCity} + '&city=' + ${selectedCity}}"
               th:class="${i == page.number} ? 'active'">
              <span th:text="${i + 1}"></span>
            </a>
          </div>
        </div>
      </div>
      <!-- ğŸ‘† ì—¬ê¸°ì— ë‚´ìš© ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ ğŸ‘†-->
    </main>

    <th:block th:replace="~{common/footer :: footerFragment}"></th:block>
  </div>
</div>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="/js/app.js"></script> <!-- template -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!-- jQuery -->
</html>