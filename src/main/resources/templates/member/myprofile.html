<!DOCTYPE html>
<html
        lang="en" xmlns:sec="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
>

<head>
    <th:block th:replace="~{common/header :: headerFragment}"></th:block>
    <!--ğŸ‘‡ì—¬ê¸°ì— ê¸°íƒ€ header ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘‡-->
    <style>
        #topInfo {
            height: 130px;
        }

        #riding-record {
            display: inline-block; /* ê°€ë¡œë¡œ ë‚˜ì—´í•˜ê¸° ìœ„í•´ blockë ˆë²¨ ìš”ì†Œë¥¼ inline-blockë ˆë²¨ë¡œ ì „í™˜ */
            width: 33%; /* ì˜ì—­ í¬ê¸° ì§€ì • ì•ˆí•´ì£¼ë©´ inline ë ˆë²¨ì²˜ëŸ¼ ë‚´ìš©ë¬¼ ë§Œí¼ë§Œ ì°¨ì§€í•˜ê¸° ë•Œë¬¸ì— í¬ê¸° ì§€ì • */
            border: 2px solid aqua;
            background: orange;
        }

        #prifile-update {
            display: inline-block; /* ê°€ë¡œë¡œ ë‚˜ì—´í•˜ê¸° ìœ„í•´ blockë ˆë²¨ ìš”ì†Œë¥¼ inline-blockë ˆë²¨ë¡œ ì „í™˜ */
            width: 50%; /* ì˜ì—­ í¬ê¸° ì§€ì • ì•ˆí•´ì£¼ë©´ inline ë ˆë²¨ì²˜ëŸ¼ ë‚´ìš©ë¬¼ ë§Œí¼ë§Œ ì°¨ì§€í•˜ê¸° ë•Œë¬¸ì— í¬ê¸° ì§€ì • */
            border: 2px solid aqua;
            background: orange;
        }

        #introduce {
            display: inline-block;
        }

        .badge-grade {
            width: 70px;
        }

        #chart {
            width: 800px;
            height: 400px;
        }
    </style>
    <!--ğŸ‘† ì—¬ê¸°ì— ê¸°íƒ€ header ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ ğŸ‘†-->
</head>

<body>
<div class="wrapper">
    <th:block th:replace="~{common/sidebar :: sidebarFragment}"></th:block>

    <div class="main">
        <th:block th:replace="~{common/navbar :: navbarFragment}"></th:block>
        <main>
            <div class="container mt-4">
                <!--ğŸ‘‡ì—¬ê¸°ì— ë‚´ìš© ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘‡-->
                <div class="container mt-4">
                    <div id="topInfo">
                        <h1 id="introduce">ë°˜ê°‘ìŠµë‹ˆë‹¤, <span sec:authentication="name"></span>ë‹˜!</h1>
                        <span th:if="${#strings.equals(badges.getGrade(), 'QUICK_BOARD')}">
                        <img class="badge-grade" src="/img/badge/kickboard.png">
                        </span>
                        <span th:if="${#strings.equals(badges.getGrade(), 'BYCICLE')}">
                            <img class="badge-grade" src="/img/badge/bicycle.png">
                        </span>
                        <span th:if="${#strings.equals(badges.getGrade(), 'SCOOTER')}">
                            <img class="badge-grade" src="/img/badge/scooter.png">
                        </span>
                        <span th:if="${#strings.equals(badges.getGrade(), 'MOTOR_CYCLE')}">
                            <img class="badge-grade" src="/img/badge/motorcycle.png">
                        </span>
                    </div>
                    <div id="container">
                        <!--ë¼ì´ë”© ê¸°ë¡-->
                        <div id="riding-record">
                            <h2>ë¼ì´ë”© ê¸°ë¡</h2>
                            <!--ë¼ì´ë”© ê¸°ë¡ì´ ì—†ì„ ë–„-->
                            <div th:if="${#strings.isEmpty(ridingRecord.getTotalRecord())}">
                                <h3>ê¸°ë¡ì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤!</h3>
                            </div>
                            <!--ë¼ì´ë”© ê¸°ë¡ì´ ì¡´ì¬í•œë‹¤ë©´-->
                            <div th:unless="${#strings.isEmpty(ridingRecord.getTotalRecord())}">
                                <div id="total-record">
                                    <h3>ì´ ê¸°ë¡</h3>
                                    <span>[[${ridingRecord.getTotalRecord()}]]km íƒ”ì–´ìš”! :)</span>
                                </div>
                                <div id="weekly-record">
                                    <h3>ì£¼ê°„ ê¸°ë¡</h3>
                                    <span>[[${ridingRecord.getWeeklyRecord()}]]km íƒ”ì–´ìš”! :)</span>
                                </div>
                                <!--ì˜¤ëŠ˜ì ê¸°ë¡ì´ ì—†ì„ ë–„-->
                                <div th:if="${#strings.isEmpty(ridingRecord.getTodayRecord())}">
                                    <h4>ì˜¤ëŠ˜ ê¸°ë¡ì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤! ì—´ì‹¬íˆ ë‹¬ë ¤ë´ìš”! :)</h4>
                                </div>
                                <div th:unless="${#strings.isEmpty(ridingRecord.getTodayRecord())}">
                                    <h3>ì˜¤ëŠ˜ ê¸°ë¡</h3>
                                    <span>[[${ridingRecord.getTodayRecord()}]]km íƒ”ì–´ìš”! :)</span>
                                </div>
                            </div>
                            <form action="/safe-ride/myprofile/create-today" method="post">
                                <input id="today-record-input" name="todayRecord" type="number" required
                                       placeholder="ì˜¤ëŠ˜ ê¸°ë¡ì„ ì…ë ¥">
                                <input type="submit" value="ì…ë ¥">
                            </form>
                        </div>
                        <div id="chart">
                            <canvas id="bar-chart"></canvas>
                        </div>
                        <!--í”„ë¡œí•„ ìˆ˜ì •-->
                        <div id="prifile-update">
                            <h2>í”„ë¡œí•„ ìˆ˜ì •</h2>
                            <form action="/safe-ride/myprofile/update" method="post">
                                <div>
                                    <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
                                    <input id="password" name="password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •">
                                </div>
                                <div>
                                    <label for="passwordCk">ë¹„ë°€ë²ˆí˜¸</label>
                                    <input id="passwordCk" name="passwordCk" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í™•ì¸">
                                </div>
                                <div>
                                    <label for="email">ì´ë©”ì¼</label>
                                    <input id="email" name="email" type="text" th:value="${member.email}">
                                </div>
                                <div>
                                    <label for="nickName">ë‹‰ë„¤ì„</label>
                                    <input id="nickName" name="nickName" type="text" th:value="${member.nickname}">
                                </div>
                                <div>
                                    <label for="phoneNumber">ì „í™”ë²ˆí˜¸</label>
                                    <input id="phoneNumber" name="phoneNumber" type="number"
                                           th:value="${member.getPhoneNumber()}">
                                </div>
                                <div>
                                    <label for="birthday">ìƒë…„ì›”ì¼</label>
                                    <input id="birthday" name="birthday" type="number"
                                           th:value="${member.getBirthday()}">
                                </div>
                                <div>
                                    <input type="submit" value="ìˆ˜ì •í•˜ê¸°">
                                </div>
                            </form>
                        </div>
                    </div>
                    <form action="/safe-ride/logout">
                        <input type="submit" value="ë¡œê·¸ì•„ì›ƒ">
                    </form>
                    <a href="/safe-ride">í™ˆìœ¼ë¡œ</a>
                </div>
                <!--ğŸ‘†ì—¬ê¸°ì— ë‚´ìš© ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘†-->
            </div>
        </main>
        <th:block th:replace="~{common/footer :: footerFragment}"></th:block>
    </div>
</div>

<!--ğŸ‘‡ì—¬ê¸°ì— ì‚¬ìš©í•˜ëŠ” script ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘‡-->
<script src="js/app.js"></script>
<!--chart.js-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script th:inline="javascript">

    window.onload = function () {
        //alert
        const alertMsg = [[${msg}]];

        if (alertMsg) {
            alert(alertMsg);
        }
    }
    const thisWeek = [[${ridingRecord.thisWeek}]];
    const weeklyRecordList = [[${ridingRecord.weeklyRecordList}]];
    new Chart(document.getElementById("bar-chart"), {
        type: 'bar',
        data: {
            labels: [
                thisWeek.at(0),
                thisWeek.at(1),
                thisWeek.at(2),
                thisWeek.at(3),
                thisWeek.at(4),
                thisWeek.at(5),
                thisWeek.at(6)],
            datasets: [
                {
                    label: "Population (millions)",
                    backgroundColor: ["#ff0000", "#ff7f27", "#ffd900", "#00db07", "#00b7ff", "#3700dc", "#a600ff"],
                    data: [
                        weeklyRecordList.at(0),
                        weeklyRecordList.at(1),
                        weeklyRecordList.at(2),
                        weeklyRecordList.at(3),
                        weeklyRecordList.at(4),
                        weeklyRecordList.at(5),
                        weeklyRecordList.at(6),
                    ]
                }
            ]
        },
        options: {
            legend: {display: false},
            title: {
                display: true,
                text: 'ì£¼ê°„ ë¼ì´ë”© ê¸°ë¡'
            }
        }
    });
</script>
<!--ğŸ‘†ì—¬ê¸°ì— ì‚¬ìš©í•˜ëŠ” script ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤ğŸ‘†-->
</body>
</html>